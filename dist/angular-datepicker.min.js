/*!
 * Angular Datepicker v2.0.0
 *
 * Released by 720kb.net under the MIT license
 * www.opensource.org/licenses/MIT
 *
 * 2017-02-06
 */


!function(){"use strict";function e(e,a,t,n,r,i){function o(o,l,c){function s(){g(),N(),d(),u(),q(),_()}function d(){var e=angular.element(Te),t=o.datepickerAppendTo&&-1!==o.datepickerAppendTo.indexOf("."),n=o.datepickerAppendTo&&-1!==o.datepickerAppendTo.indexOf("#"),r=o.datepickerAppendTo&&"body"===o.datepickerAppendTo;if(t){var i=o.datepickerAppendTo.replace(".",""),c=document.getElementsByClassName(i)[0],s=angular.element(c);s.append(a(e)(o,function(e){re=angular.element(e)[0]}))}else if(n){var i=o.datepickerAppendTo.replace("#",""),c=document.getElementById(i),s=angular.element(c);s.append(a(e)(o,function(e){re=angular.element(e)[0]}))}else if(r){var d=angular.element(document).find("body");d.append(a(e)(o,function(e){re=angular.element(e)[0]}))}else{var u=l[0].querySelector(".input-group");u?angular.element(u).after(a(e)(o)):Se.after(a(e)(o)),re=l[0].querySelector("._720kb-datepicker-calendar")}}function u(){ne=angular.element(l[0].querySelector("span")),te=angular.element(e),ie=angular.element(re),De?(ne&&(ne.on("click",function(){S()}),ne.on("mouseenter",function(){be=!0}),ne.on("mouseleave",function(){be=!1})),Se.on("focus",function(){S()}),Se.on("mouseenter",function(){ke=!0}),Se.on("mouseleave",function(){ke=!1}),ie.on("mouseenter",function(){ye=!0}),ie.on("mouseleave",function(){ye=!1})):(Se.on("keydown",function(e){var a=e.keyCode||e.which;9==a&&(ne?(ne.off("click mouseenter mouseleave"),Se.off("keydown focus mouseenter mouseleave"),ie.off("mouseenter mouseleave"),te.off("click"),B()):(Se.off("keydown focus mouseenter mouseleave"),ie.off("mouseenter mouseleave"),te.off("click"),B()))}),te.on("click",function(){ne?be||ke||ye||(f(),B()):ke||ye||(f(),B())})),o.$on("$destroy",function(){ne&&ne.off("click mouseenter mouseleave"),Se.off("focus mouseenter mouseleave"),ie.off("mouseenter mouseleave"),te.off("click")})}function f(){ne&&ne.off("click mouseenter mouseleave"),Se.off("focus mouseenter mouseleave"),ie.off("mouseenter mouseleave"),te.off("click")}function g(){o.dateSet&&!o.dateSetHidden&&M()}function p(){return ce?angular.element(l[0].querySelector("."+ce)):angular.element(l[0].querySelector("input:first-child"))}function v(){oe="datepicker-id-"+(new Date).getTime()+(Math.floor(6*Math.random())+8);var e=[];e.push('<div id="'+oe+'" '),e.push('class="_720kb-datepicker-calendar'),o.datepickerClass&&e.push(" "+o.datepickerClass),o.classForToggle&&e.push(" "+o.classForToggle),e.push('">'),e.push("</div>");var a=m(),t=h(),n=y(),i=k(),l=function(a){e.splice(e.length-1,0,a)};return a.forEach(l),t.forEach(l),n.forEach(l),i.forEach(l),e=e.join(""),e=e.replace(/{{/g,r.startSymbol()),e=e.replace(/}}/g,r.endSymbol())}function m(){return['<div class="_720kb-datepicker-calendar-header">','<div class="_720kb-datepicker-calendar-header-left">','<a id="previousMonthBtn" class="_720kb-datepicker-calendar-month-button" href="javascript:void(0)" tabindex=-1 ng-click="prevMonth()" ng-if="willPrevMonthBeSelectable()" title="'+ge+'">',ue,"</a>","</div>",'<div class="_720kb-datepicker-calendar-header-middle _720kb-datepicker-calendar-month">',"<strong>{{month}}</strong>&nbsp;",'<a href="javascript:void(0)" tabindex=-1 ng-click="toogleYearsBtn(); showYearsPagination = !showYearsPagination; setYearCalendarClasses()">',"<span>","{{year}}",'<i id="selectYearBtn" class="_720kb-datepicker-calendar-header-closed-pagination"></i>',"</span>","</a>","</div>",'<div class="_720kb-datepicker-calendar-header-right">','<a id="nextMonthBtn" class="_720kb-datepicker-calendar-month-button" tabindex=-1 href="javascript:void(0)" ng-click="nextMonth()" ng-if="willNextMonthBeSelectable()" title="'+pe+'">',fe,"</a>","</div>","</div>"]}function h(){return['<div class="_720kb-datepicker-calendar-header" ng-if="showYearsPagination">','<div class="_720kb-datepicker-calendar-years-pagination">','<a tabindex=-1 href="javascript:void(0)" ng-click="setNewYear(y);" ng-repeat="y in paginationYears track by $index">',"{{y}}","</a>","</div>",'<div class="_720kb-datepicker-calendar-years-pagination-pages">','<a href="javascript:void(0)" tabindex=-1 ng-click="prevYearPage(); setYearCalendarClasses();">',ue,"</a>",'<a href="javascript:void(0)" tabindex=-1 ng-click="nextYearPage(); setYearCalendarClasses();">',fe,"</a>","</div>","</div>"]}function y(){return['<div class="_720kb-datepicker-calendar-days-header">','<div ng-repeat="d in ::daysInString">',"{{::d}}","</div>","</div>"]}function k(){return['<div class="_720kb-datepicker-calendar-body">','<a tabindex=-1 href="javascript:void(0)" ng-repeat="px in prevMonthDays" class="_720kb-datepicker-calendar-day _720kb-datepicker-disabled">',"{{::px}}","</a>",'<a active-day tabindex=-1 href="javascript:void(0)" ng-repeat="item in days" ng-click="setDatepickerDay(item)" class="_720kb-datepicker-calendar-day">',"{{::item}}","</a>",'<a tabindex=-1 href="javascript:void(0)" ng-repeat="nx in nextMonthDays" class="_720kb-datepicker-calendar-day _720kb-datepicker-disabled">',"{{::nx}}","</a>","</div>"]}function b(){xe=Z(),Ce=xe.getMonth(),o.day=xe.getDate(),o.year=xe.getFullYear()}function w(){Ce=_e.getMonth(),o.day=_e.getDate(),o.year=_e.getFullYear()}function D(){o.year=Number(o.year)-1}function Y(){o.year=Number(o.year)+1}function M(){he=new Date(o.year,Ce,o.day),(U(he)||G(he))&&(ve?Se.val(n("date")(he,ve)):Se.val(he),Se.triggerHandler("input"),Se.triggerHandler("change"))}function T(){function e(e,a){if(!(e.className.indexOf(a)>-1)){var t=e.className.split(" ");t.push(a),e.className=t.join(" ")}}function a(e,a){if(-1!==e.className.indexOf(a)){for(var t=e.className.split(" "),n=0;n<t.length;n++)if(t[n]===a){t=t.slice(0,n).concat(t.slice(n+1));break}e.className=t.joins(" ")}}return{add:e,remove:a}}function S(){we=!0,De=!1;var a="_720kb-datepicker-open",t=e.document.getElementById(oe);t=angular.element(t),t.addClass(a),u()}function _(){for(var e=Ce,a=o.year,t=new Date(a,e+1,0),n=new Date(a,e),r=t.getDay(),i=n.getDay(),l=t.getDate(),c=(n.getDate(),[]),s=[],d=[],u=1;l>=u;u++)d.push(u);if(0!==i)for(var f=new Date(a,e,0),g=f.getDate(),p=f.getDay(),u=p;u>=0;u--)c.push(g-u);if(6>r)for(var v=6-r,u=1;v>=u;u++)s.push(u);o.prevMonthDays=c,o.nextMonthDays=s,o.days=d,x()}function x(){i(function(){var e="_720kb-datepicker-active",a="_720kb-datepicker-disabled",t=l[0].querySelectorAll("a[active-day]");t&&0!=t.length&&angular.forEach(t,function(t){t=angular.element(t);var n=new Date(o.year,Ce,Number(t.html())),r=!U(n)||!G(n)||!z(n);t.removeClass(e),t.removeClass(a),o.day==t.html()&&Ne&&t.addClass(e),r&&t.addClass(a)})})}function C(){if(11===Ce?(Ce=0,Y()):Ce+=1,_e){var e=new Date(o.year,Ce,o.days[0]);G(e)||w()}N(),P(),_()}function N(){var e=n("date")(new Date(o.year,Ce),"MMMM");o.month=e[0].toUpperCase()+e.substr(1,e.length-1)}function F(){var e=Ce,a=o.year,t=new Date(a,e,1).getTime(),r=n("date")(new Date(t-le),"dd");if(0===e?(e=11,a-=1):e-=1,xe){var t=new Date(a,e,r);return U(t)}return!0}function A(){var e=Ce,a=o.year;if(11===e?(e=0,a+=1):e+=1,_e){var t=new Date(a,e,1);return G(t)}return!0}function E(){if(0===Ce?(Ce=11,D()):Ce-=1,xe){var e=(o.year,o.days[o.days.length-1],new Date(o.year,Ce,o.day-1));U(e)||b()}N(),P(),_()}function P(){var e=new Date(he.getFullYear(),he.getMonth()),a=new Date(o.year,Ce);Ne=e.getTime()!==a.getTime()?void 0:he.getDate()}function j(e){console.log("set year param ",e);var a=o.year<Number(e),t=o.year>Number(e),n=o.year===Number(e);if(!n){if(console.log("old year is ",o.year),a)if(_e){if(console.log("is selectable max year",J(e)),!J(e))return;var r=new Date(e,he.getMonth(),o.day);o.year=e,console.log("$scope year after selectable ",o.year),console.log("is selectable max date ",G(r)),G(r)||w()}else o.year=e;if(t)if(xe){if(!K(e))return;var r=new Date(e,he.getMonth(),o.day);r.setFullYear(e),o.year=e,U(r)||b()}else o.year=e;console.log("new year is ",o.year),N(),P(),_(),q(),o.showYearsPagination=!1,R(),H()}}function B(){var e="_720kb-datepicker-open";De=!0,we=!1,i(function(){angular.element(re).removeClass(e)}),f(),u()}function $(e){var a=new Date(o.year,Ce,e),t=z(a)&&G(a)&&U(a);t&&(o.day=Number(e),M(),c.hasOwnProperty("dateRefocus")&&Se[0].focus(),x(),B())}function q(){var e=o.year,a=o.howManyYearsToShow?o.howManyYearsToShow:20;a=Math.ceil(a/2);var t=[],n=a,r=a;o.paginationYears=[];for(var i=n;i>0;i-=1)t.push(Number(e)-i);for(var i=0;r>i;i+=1)t.push(Number(e)+i);o.paginationYears=t;var l=new Date(t[0],0).getFullYear(),c=new Date(t[t.length-1],0).getFullYear();Ye=K(l),Me=J(c)}function I(){var e=o.howManyYearsToShow?o.howManyYearsToShow:20,a=Math.ceil(e/2),t=L(a,o.paginationYears[0]),n=!1,r=!1;L(a,t[0]).forEach(function(e){K(new Date(e,0).getFullYear())&&(n=!0)}),L(a,t[a]+a).forEach(function(e){J(new Date(e,0).getFullYear())&&(r=!0)}),o.paginationYears=t,Me=r,Ye=n}function O(){var e=o.howManyYearsToShow?o.howManyYearsToShow:20,a=Math.ceil(e/2),t=L(a,o.paginationYears[a]+a),n=!1,r=!1;L(a,t[0]).forEach(function(e){K(new Date(e,0).getFullYear())&&(n=!0)}),L(a,t[a]+a).forEach(function(e){J(new Date(e,0).getFullYear())&&(r=!0)}),o.paginationYears=t,Me=r,Ye=n}function L(e,a){for(var t=[],n=e;n>0;n-=1)t.push(Number(a)-n);for(var n=0;e>n;n+=1)t.push(Number(a)+n);return t}function H(){o.showYearsPagination&&i(function(){var e="_720kb-datepicker-calendar-years-pagination-pages",a=l[0].querySelector("."+e),t=a.querySelectorAll("a"),n="_720kb-datepicker-calendar-years-pagination",r=l[0].querySelector("."+n),i=r.querySelectorAll("a"),c=!1;if(0!=i.length&&(angular.forEach(i,function(e){e=angular.element(e),e.removeClass("_720kb-datepicker-active"),e.removeClass("_720kb-datepicker-disabled"),e.html()==o.year&&(c=!0,e.addClass("_720kb-datepicker-active")),J(e.html())&&K(e.html())||e.addClass("_720kb-datepicker-disabled")}),0!=t.length)){var s=angular.element(t[0]),d=angular.element(t[1]),u="_720kb-datepicker-item-hidden";Me?d.removeClass(u):d.addClass(u),Ye?s.removeClass(u):s.addClass(u)}})}function R(){var e="_720kb-datepicker-calendar-header-opened-pagination",a="_720kb-datepicker-calendar-header-closed-pagination",t=angular.element(l[0].querySelector("#selectYearBtn"));t.toggleClass(e+" "+a)}function z(e){var a=me&&me.length>0;if(a)for(var t=0;t<=me.length;t+=1){var n=new Date(me[t]).getTime(),r=e.getTime();if(n===r)return!1}return!0}function U(e){return xe?e.getTime()>=new Date(o.dateMinLimit).getTime():!0}function G(e){return _e?e.getTime()<=_e.getTime():!0}function J(e){return _e?e<=_e.getFullYear():!0}function K(e){return xe?e>=new Date(o.dateMinLimit).getFullYear():!0}function Q(){return he.getFullYear()}function V(){return he.getMonth()}function W(){return he.getDate()}function X(){var e=o.dateMaxLimit;if(e){var a=e instanceof Date;a||(e=new Date(e)),"Invalid Date"===e.toString()&&(e=void 0)}return e}function Z(){var e=o.dateMinLimit;if(e){var a=e instanceof Date;a||(e=new Date(e)),"Invalid Date"===e.toString()&&(e=void 0)}return e}function ee(){var e=o.dateSet;if(e){var a=o.dateSet instanceof Date;if(a||(e=new Date(o.dateSet)),"Invalid Date"!==e.toString()){console.log("without offset ",new Date(e));var t=6e4*e.getTimezoneOffset();return console.log("offset ",t),console.log("get time + offset hours ",new Date(e.getTime()+t)),new Date(e.getTime())}return new Date}return new Date}function ae(){var e=o.dateDisabledDates,a=e instanceof Array;return e&&a&&(e=e.map(function(e){var a=e instanceof Date;return a||(e=new Date(e)),"Invalid Date"!==e.toString()?e:void 0}),e=e.filter(function(e){return!!e}),e=0===e.length?void 0:e),e}var te,ne,re,ie,oe,le=864e5,ce=o.selector,se='<b class="_720kb-datepicker-default-button">&lang;</b>',de='<b class="_720kb-datepicker-default-button">&rang;</b>',ue=c.buttonPrev||se,fe=c.buttonNext||de,ge=ge||"Prev",pe=pe||"Next",ve=o.dateFormat,me=ae(),he=ee(),ye=!1,ke=!1,be=!1,we=!1,De=!0,Ye=!0,Me=!0,Te=v(),Se=(T(),p()),_e=X(),xe=Z(),Ce=V(),Ne=he.getDate();o.day=W(),o.year=Q(),o.daysInString=t.DATETIME_FORMATS.SHORTDAY,o.willPrevMonthBeSelectable=F,o.willNextMonthBeSelectable=A,o.nextMonth=C,o.prevMonth=E,o.setNewYear=j,o.setDatepickerDay=$,o.paginateYears=q,o.prevYearPage=I,o.nextYearPage=O,o.toogleYearsBtn=R,o.setYearCalendarClasses=H,s(),o.$watch("dateMinLimit",function(e,a){if(e!==a){x();var t=new Date(o.year,Ce,o.day),n=U(t);n||(b(),o.day=new Date(e).getDate(),M())}})}var l={restrict:"AEC",scope:{selector:"@",dateFormat:"@",dateSet:"<",howManyYearsToShow:"@",dateMinLimit:"=",dateMaxLimit:"@",dateMonthTitle:"@",dateYearTitle:"@",buttonNextTitle:"@",buttonPrevTitle:"@",dateDisabledDates:"<",dateSetHidden:"@",dateTyper:"@",datepickerAppendTo:"@",datepickerClass:"@"},link:o};return l}angular.module("720kb.datepicker",[]).directive("datepicker",e),e.$inject=["$window","$compile","$locale","$filter","$interpolate","$timeout"]}();

//# sourceMappingURL=angular-datepicker.sourcemap.map
